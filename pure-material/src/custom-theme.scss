// Include theming for Angular Material with `mat.theme()`.
// This Sass mixin will define CSS variables that are used for styling Angular Material
// components according to the Material 3 design spec.
@use 'sass:map';
@use '@angular/material' as mat;
@use 'color-palettes' as colors;

@include mat.core();

// Crear el tema con todas las paletas personalizadas
$light-theme: (
  color: (
    primary: colors.$primary-palette,
    secondary: colors.$secondary-palette,
    tertiary: colors.$tertiary-palette,
    error: colors.$error-palette,
    neutral: colors.$neutral-palette,
    neutral-variant: colors.$neutral-variant-palette,
    theme-type: light,
  ),
  typography: (
    plain-family: 'Inter, sans-serif',
    brand-family: 'Inter, sans-serif',
  )
);

$dark-theme: (
  color: (
    primary: colors.$primary-palette,
    secondary: colors.$secondary-palette,
    tertiary: colors.$tertiary-palette,
    error: colors.$error-palette,
    neutral: colors.$neutral-palette,
    neutral-variant: colors.$neutral-variant-palette,
    theme-type: dark,
  ),
  typography: (
    plain-family: 'Inter, sans-serif',
    brand-family: 'Inter, sans-serif',
  )
);

html {
  // Generar TODAS las variables CSS del sistema de Material 3
  @include mat.theme($light-theme);
  
  // Aplicar estilos base del core theme - genera TODAS las variables!!
  @include mat.core-theme($light-theme);

  // PRIMARY - Sobrescribir el valor por defecto (40 -> 70, 100 -> 10)
  --mat-sys-primary: #{map.get(colors.$primary-palette, 60)};
  --mat-sys-on-primary: #{map.get(colors.$primary-palette, 10)};
  --mat-sys-primary-container: #{map.get(colors.$primary-palette, 90)};
  --mat-sys-on-primary-container: #{map.get(colors.$primary-palette, 10)};
  
  // SECONDARY - Definir manualmente toda la paleta
  --mat-sys-secondary: #{map.get(colors.$secondary-palette, 60)};
  --mat-sys-on-secondary: #{map.get(colors.$secondary-palette, 10)};
  --mat-sys-secondary-container: #{map.get(colors.$secondary-palette, 90)};
  --mat-sys-on-secondary-container: #{map.get(colors.$secondary-palette, 10)};
  
  // TERTIARY - Definir manualmente toda la paleta
  --mat-sys-tertiary: #{map.get(colors.$tertiary-palette, 40)};
  --mat-sys-on-tertiary: #{map.get(colors.$tertiary-palette, 100)};
  --mat-sys-tertiary-container: #{map.get(colors.$tertiary-palette, 90)};
  --mat-sys-on-tertiary-container: #{map.get(colors.$tertiary-palette, 10)};
  
  // ERROR - Definir manualmente toda la paleta
  --mat-sys-error: #{map.get(colors.$error-palette, 40)};
  --mat-sys-on-error: #{map.get(colors.$error-palette, 100)};
  --mat-sys-error-container: #{map.get(colors.$error-palette, 90)};
  --mat-sys-on-error-container: #{map.get(colors.$error-palette, 10)};

  // SURFACE - Definir manualmente usando paleta Surface (alias de Secondary)
  --mat-sys-surface: #{map.get(colors.$secondary-palette, 98)};
  --mat-sys-on-surface: #{map.get(colors.$secondary-palette, 10)};
  --mat-sys-surface-dim: #{map.get(colors.$secondary-palette, 87)};
  --mat-sys-surface-bright: #{map.get(colors.$secondary-palette, 98)};
  --mat-sys-surface-container-lowest: #{map.get(colors.$secondary-palette, 100)};
  --mat-sys-surface-container-low: #{map.get(colors.$secondary-palette, 96)};
  --mat-sys-surface-container: #{map.get(colors.$secondary-palette, 94)};
  --mat-sys-surface-container-high: #{map.get(colors.$secondary-palette, 92)};
  --mat-sys-surface-container-highest: #{map.get(colors.$secondary-palette, 90)};

}

html.dark-theme {
  // Generar TODAS las variables CSS del sistema para dark
  @include mat.theme($dark-theme);
  
  // Aplicar estilos base del core theme para dark
  @include mat.core-theme($dark-theme);

  // PRIMARY para tema oscuro
  --mat-sys-primary: #{map.get(colors.$primary-palette, 40)};
  --mat-sys-on-primary: #{map.get(colors.$primary-palette, 20)};
  --mat-sys-primary-container: #{map.get(colors.$primary-palette, 30)};
  --mat-sys-on-primary-container: #{map.get(colors.$primary-palette, 90)};
  
  // SECONDARY para tema oscuro
  --mat-sys-secondary: #{map.get(colors.$secondary-palette, 80)};
  --mat-sys-on-secondary: #{map.get(colors.$secondary-palette, 20)};
  --mat-sys-secondary-container: #{map.get(colors.$secondary-palette, 30)};
  --mat-sys-on-secondary-container: #{map.get(colors.$secondary-palette, 90)};
  
  // TERTIARY para tema oscuro
  --mat-sys-tertiary: #{map.get(colors.$tertiary-palette, 80)};
  --mat-sys-on-tertiary: #{map.get(colors.$tertiary-palette, 20)};
  --mat-sys-tertiary-container: #{map.get(colors.$tertiary-palette, 30)};
  --mat-sys-on-tertiary-container: #{map.get(colors.$tertiary-palette, 90)};
  
  // ERROR para tema oscuro
  --mat-sys-error: #{map.get(colors.$error-palette, 80)};
  --mat-sys-on-error: #{map.get(colors.$error-palette, 20)};
  --mat-sys-error-container: #{map.get(colors.$error-palette, 30)};
  --mat-sys-on-error-container: #{map.get(colors.$error-palette, 90)};

  // SURFACE para tema oscuro
  --mat-sys-surface: #{map.get(colors.$secondary-palette, 6)};
  --mat-sys-on-surface: #{map.get(colors.$secondary-palette, 90)};
  --mat-sys-surface-dim: #{map.get(colors.$secondary-palette, 6)};
  --mat-sys-surface-bright: #{map.get(colors.$secondary-palette, 24)};
  --mat-sys-surface-container-lowest: #{map.get(colors.$secondary-palette, 4)};
  --mat-sys-surface-container-low: #{map.get(colors.$secondary-palette, 10)};
  --mat-sys-surface-container: #{map.get(colors.$secondary-palette, 12)};
  --mat-sys-surface-container-high: #{map.get(colors.$secondary-palette, 17)};
  --mat-sys-surface-container-highest: #{map.get(colors.$secondary-palette, 22)};

  // BACKGROUND para tema oscuro
  --mat-sys-background: #{map.get(colors.$neutral-palette, 10)};
  --mat-sys-on-background: #{map.get(colors.$neutral-palette, 90)};

  // Forzar colores de fondo para el tema oscuro
  background-color: var(--mat-sys-background);
  color: var(--mat-sys-on-background);

}

body {
  // Default the application to a light color theme
  color-scheme: light;

  // Set a default background, font and text colors for the application using
  // Angular Material's system-level CSS variables
  background-color: var(--mat-sys-background);
  color: var(--mat-sys-on-background);
  font: var(--mat-sys-body-medium);

  // Reset the user agent margin
  margin: 0;
}

html.dark-theme body,
html.dark-theme h1 {
  color-scheme: dark;
  background-color: var(--mat-sys-background);
  color: var(--mat-sys-on-background);
}
